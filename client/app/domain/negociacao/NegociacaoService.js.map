{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","Promise","all","periodo","reduce","novoArray","item","concat","sort","a","b","getTime","catch","console","log"],"mappings":";;;;;;AAAQA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAED,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;AACV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,2CAA2B;;AAEvB,2BAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EACMF,OAAOG,UADb,EACyBH,OAAOI,KADhC,CADJ,CAFD,EAKIC,OAAO;AACN,8BAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACH,qBAPF,CAAP;AAQH;AACDC,mDAAmC;AAC/B,2BAAO,KAAKb,KAAL,CAAWE,GAAX,CAAe,sBAAf,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EACMF,OAAOG,UADb,EACyBH,OAAOI,KADhC,CADJ,CAFD,EAKIC,OAAO;AACN,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBAPF,CAAP;AAQH;;AAEDE,oDAAoC;AAChC,2BAAO,KAAKd,KAAL,CAAWE,GAAX,CAAe,uBAAf,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UACN,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EACMF,OAAOG,UADb,EACyBH,OAAOI,KADhC,CADJ,CAFD,EAKIC,OAAO;AACN,8BAAM,IAAIC,KAAJ,CAAU,2DAAV,CAAN;AACH,qBAPF,CAAP;AAQH;;AAEDG,4CAA4B;AACxB,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKhB,wBAAL,EADe,EAEf,KAAKY,gCAAL,EAFe,EAGf,KAAKC,iCAAL,EAHe,CAAZ,EAIJX,IAJI,CAICe,WACJA,QAAQC,MAAR,CAAe,CAACC,SAAD,EAAYC,IAAZ,KACXD,UAAUE,MAAV,CAAiBD,IAAjB,CADJ,EAC4B,EAD5B,EACgCE,IADhC,CACqC,CAACC,CAAD,EAAIC,CAAJ,KAC7BA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAF3B,CALG,EAQLC,KARK,CAQChB,OAAO;AACXiB,gCAAQC,GAAR,CAAYlB,GAAZ;AACA,8BAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH,qBAXM,CAAP;AAYH;AApD0B","file":"NegociacaoService.js","sourcesContent":["import {HttpService} from '../../util/HttpService.js';\nimport {Negociacao} from './Negociacao.js';\n\nexport class NegociacaoService {\n\n    constructor() {\n        this._http = new HttpService();\n    }\n\n    obterNegociacoesDaSemana() {\n\n        return this._http.get('negociacoes/semana')\n            .then(dados =>\n                dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data)\n                        , objeto.quantidade, objeto.valor)\n                ), err => {\n                    throw new Error('Não foi possível obter as negociacoes da semana');\n                });\n    }\n    obtemNegociacoesDaSemanaAnterior() {\n        return this._http.get('negociacoes/anterior')\n            .then(dados =>\n                dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data)\n                        , objeto.quantidade, objeto.valor)\n                ), err => {\n                    throw new Error('Não foi possível obter as negociacoes da semana anterior');\n                });\n    };\n\n    obtemNegociacoesDaSemanaRetrasada() {\n        return this._http.get('negociacoes/retrasada')\n            .then(dados =>\n                dados.map(objeto =>\n                    new Negociacao(new Date(objeto.data)\n                        , objeto.quantidade, objeto.valor)\n                ), err => {\n                    throw new Error('Não foi possível obter as negociacoes da semana retrasada');\n                });\n    }\n\n    obtemNegociacoesDoPeriodo() {\n        return Promise.all([\n            this.obterNegociacoesDaSemana(),\n            this.obtemNegociacoesDaSemanaAnterior(),\n            this.obtemNegociacoesDaSemanaRetrasada()\n        ]).then(periodo =>\n            periodo.reduce((novoArray, item) =>\n                novoArray.concat(item), []).sort((a, b) =>\n                    b.data.getTime() - a.data.getTime())\n        ).catch(err => {\n            console.log(err);\n            throw new Error('Não foi possível obter as negociações do período')\n        });\n    }\n}"]}